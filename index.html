<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste iComprova</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="background:#0e0e0e;color:#fff;font-family:Arial;padding:30px">

<h2>Teste iComprova (COM PROXY)</h2>

<h3>MDF-e</h3>
<textarea id="xmlMDFe" style="width:100%;height:200px"></textarea><br>
<button onclick="enviarMDFe()">Enviar MDF-e</button>
<pre id="outMDFe"></pre>

<h3>CT-e</h3>
<textarea id="xmlCTe" style="width:100%;height:200px"></textarea><br>
<input id="tokenViagem" placeholder="token viagem"><br>
<button onclick="enviarCTe()">Enviar CT-e</button>
<pre id="outCTe"></pre>

<script>
async function enviarMDFe() {
  const xml = document.getElementById("xmlMDFe").value;
  const r = await fetch("http://localhost:3000/mdfe", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ documento: xml })
  });
  document.getElementById("outMDFe").textContent = await r.text();
}

async function enviarCTe() {
  const xml = document.getElementById("xmlCTe").value;
  const token = document.getElementById("tokenViagem").value;
  const r = await fetch("http://localhost:3000/cte", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ documento: xml, token })
  });
  document.getElementById("outCTe").textContent = await r.text();
}
</script>

</body>
</html>
